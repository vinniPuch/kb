<html> <head>    <meta charset="utf-8">     <title></title>    <link rel="stylesheet" type="text/css" href="../../css/style.css">    <script type="text/javascript"> var type = 'table';            </script> <link rel='stylesheet' href='/css/style-frame.css'><link rel='stylesheet' href='/css/correction.css'></head>  <body>    <div id="wrapper">       <div class="page-title">          <div id="title">             <a class="logo" href="/"><span>­</span></a>              <div class="category">                <a class="category-link" href="/category/svn/svn.html">SVN</a>             </div>          </div>       </div>        <div id="content-wrapper" class="table-tpl3">          <div id="header-indent"></div>           <div class="indent"></div>           <div id="sub-title-bar">             <h4 class="editable" id="sub-category-sub-title">Работа с дампом (переезд репозитория, удаление ненужных файлов со всех ревизий)</h4>          </div>           <table id="table-3column-2bold">             <tbody>                <tr contenteditable="false" class="">                   <td class="first"><span>Сначала скидываем репозиторий в dump file. на машине с репозиторием.<br></span><br></td>                    <td class="middle">svn admin dump /home/svn/repo/ &gt; /tmp/mysvn.dump</td>                    <td class="last"><br></td>                </tr>                 <tr contenteditable="false" class="">                   <td class="first"><span>На другой машине&nbsp;</span></td>                    <td class="middle">scp login@host:/tmp/mysvn.dump /tmp<br>                   sv nadmin create /new/repo/path<br>                   sv nadmin load /new/repo/path &lt; /tmp/mysvn.dump</td>                    <td class="last">Копирование при помощи&nbsp;<span style="font-weight: bold;">scp</span>&nbsp;на сервер где будет развернут дамп. Создание репозитория. Развертывание дампа.<br></td>                </tr>                 <tr contenteditable="false" class="">                   <td class="first"><span>Иногда возникает необходимость полностью удалить файлы из репозитория SVN так, чтобы они не остались ни в одной ревизии. Это могут быть ошибочно добавленные макеты и прочие большие файлы, которые не хотелось бы держать в репозитории.</span><br></td>                    <td class="middle">                      <p style="font-weight: bold; background-color: rgb(222, 223, 223);">1) Сохраняем дамп репозитория:<br>                      &nbsp;&nbsp; &nbsp; svn admin dump /path/to/repo &gt; repo.dmp</p><br style="font-weight: normal; background-color: rgb(222, 223, 223);">                       <p style="font-weight: bold; background-color: rgb(222, 223, 223);">2) Убираем из дампа ненужные файлы:<br>                      &nbsp;&nbsp; &nbsp; cat repo.dmp | svndumpfilter exclude /path/to/excluded/files &gt; clean.dmp</p><br style="font-weight: normal; background-color: rgb(222, 223, 223);">                       <p style="font-weight: bold; background-color: rgb(222, 223, 223);">3) Переименовываем старый репозиторий:<br>                      &nbsp;&nbsp; &nbsp; mv /path/to/repo /path/to/repo.backup</p><br style="font-weight: normal; background-color: rgb(222, 223, 223);">                       <p style="font-weight: bold; background-color: rgb(222, 223, 223);">4) Создаем новый репозиторий, для заливки дампа:<br>                      &nbsp;&nbsp; &nbsp; svn admin create /path/to/repo</p><br style="font-weight: normal; background-color: rgb(222, 223, 223);">                       <p style="font-weight: bold; background-color: rgb(222, 223, 223);">5) Заливаем модифицированный дамп:<br>                      &nbsp;&nbsp; &nbsp; cat clean.dmp | svnadmin load /path/to/repo</p>                   </td>                    <td class="last"><span style="background-color: rgb(222, 223, 223);">При описанном способе сохранятся все данные репозитория, включая даты коммитов.</span><br></td>                </tr>             </tbody>          </table>           <div id="fake-footer"></div>       </div>        <div class="page-footer">          <div id="footer">             <a class="logo" href="/"><span>­</span></a>              <div class="category">                <a class="category-link" href="/category/svn/svn.html">SVN</a>             </div>          </div>       </div>        <div class="footer-indent"></div>    </div> </body> </html> 